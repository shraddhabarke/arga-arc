(do
    (rule
        (and
            (filter_by_color R)
            (filter_by_degree 0)
        )
        (apply
            (extend_node L overlap=T)
            (extend_node U overlap=T)
            (extend_node R overlap=T)
            (extend_node D overlap=T)
        )
    )
)

(do
    (rule
        (filter_by_color R)
        (apply
            (extend_node L overlap=F)
            (update_color B)
        )
    )
)

(do
    (rule
        (filter_by_color R)
        (apply
            (extend_node R overlap=T)
        )
    )
    (rule
        (filter_by_color R)
        (apply
            (extend_node L overlap=T)
        )
    )
)

(do
    (rule
        (filter_by_color O)
        (apply
            (fill_rectangle B)
        )
    )
)

(do
    (rule
        ()
        (apply
            (update_color B)
        )
    )
    (rule
        (not
            (filter_by_color R)
        )
        (apply
            (update_color O)
        )
    )
)

(do
    (rule
        (filter_by_color R)
        (apply
            (move_node_max D)
            (update_color B)
        )
    )
)

(do
  (rule
    (filter_by_color R)
    (apply
      (extend_node R overlap=F)
      (extend_node L overlap=F)
      (extend_node D overlap=F)
      (update_color B)
    )
  )
  (rule
    (filter_by_color B)
    (apply
      (update_color O)
    )
  )
)

(do
    (rule
        (filter_by_color O)
        (apply
            (extend_node R overlap=F)
        )
    )
)

(do
    (rule
        (filter_by_color R)
        (apply
            (extend_node L overlap=F)
            (update_color B)
        )
    )
)

(do
    (rule
        (filter_by_color R)
        (apply
            (move_node_max U)
            (update_color B)
        )
    )
)

(do
    (rule
        (filter_by_color R)
        (apply
            (extend_node L overlap=T)
            (update_color B)
            (extend_node R overlap=T)
        )
    )
)

(do
    (rule
        (filter_by_color R)
        (apply
            (extend_node L overlap=T)
            (update_color B)
        )
    )
)

(do
    (rule
        (and
            (filter_by_color O)
            (filter_by_neighbor_color R)
        )
        (apply
            (update_color B)
        )
    )
)

(do
    (rule
        (filter_by_color O)
        (apply
            (extend_node L overlap=F)
        )
    )
    (rule
        (and
            (filter_by_color O)
            (filter_by_degree 1)
        )
        (apply
            (update_color B)
        )
    )
)

(do
    (rule
        (filter_by_color R)
        (apply
            (update_color B)
            (extend_node UL overlap=F)
            (extend_node U overlap=F)
            (extend_node UR overlap=F)
        )
    )
)

(do
    (rule
        (filter_by_color R)
        (apply
            (extend_node R)
        )
    )
    (rule
        (filter_by_color O)
        (apply
            (update_color B)
        )
    )
    (rule
        (filter_by_color R)
        (apply
            (update_color O)
        )
    )
)

(do
    (rule
        (and
            (filter_by_color R)
            (filter_by_neighbor_color O)    
        )
        (apply
            (update_color B)
        )
    )
)

(do
    (rule
        (filter_by_color R)
        (apply
            (move_node_max U)
            (update_color B)
        )
    )
)

(do
    (rule
        (filter_by_color O)
        (apply
            (extend_node R overlap=T)
            (update_color B)
        )
    )
    (rule
        (filter_by_color B)
        (apply
            (move_node_max R)
        )
    )
)

(do
    (rule
        (filter_by_color O)
        (apply
            (update_color B)
        )
    )
)

(do
    (rule
        (filter_by_color R)
        (apply
            (extend_node L)
        )
    )
    (rule
        ()
        (apply
            (update_color B)
        )
    )
    (rule
        (filter_by_color R)
        (apply
            (extend_node R)
        )
    )
)

(do
    (rule
        ()
        (apply
            (update_color B)
        )
    )
    (rule
        (filter_by_color O)
        (apply
            (update_color O)
        )
    )
    (rule
        (filter_by_color R)
        (apply
            (update_color R)
        )
    )
    (rule
        (filter_by_color G)
        (apply
            (update_color G)
        )
    )
    (rule
        (filter_by_color C)
        (apply
            (update_color C)
        )
    )
    (rule
        (filter_by_color F)
        (apply
            (update_color F)
        )
    )
)

(do
    (rule
        (filter_by_color O)
        (apply
            (extend_node R overlap=F)
        )
    )
    (rule
        (filter_by_color O)
        (apply
            (update_color B)
        )
    )
)

(do
    (rule
        (filter_by_color R)
        (apply
            (extend_node R overlap=F)
            (update_color B)
        )
    )
    (rule
        (filter_by_color B)
        (apply
            (move_node_max R)
        )
    )
)

(do
    (rule
        (filter_by_color R)
        (apply
            (extend_node R overlap=T)
        )
    )
)

(do
    (rule
        (and
            (filter_by_color R)
            (filter_by_degree 1)
        )
        (apply
            (update_color B)
        )
    )
    (rule
        (and
            (filter_by_color O)
            (filter_by_degree 1)
        )
        (apply
            (update_color B)
        )
    )
)

(do
    (rule
        (filter_by_color O)
        (apply
            (extend_node R overlap=T)
        )
    )
    (rule
        (filter_by_color O)
        (apply
            (update_color B)
        )
    )
)

(do
    (rule
        (filter_by_color R)
        (apply
            (move_node_max L)
            (update_color B)
        )
    )
)

(do
    (rule
        (filter_by_color R)
        (apply
            (extend_node L overlap=F)
            (update_color B)
        )
    )
)